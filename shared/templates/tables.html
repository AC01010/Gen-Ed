{% macro datatable(name, columns, data, link_col=None, link_template=None, edit_link=None) -%}
  <table id="tbl_{{name}}">
    <thead>
      {% for col in columns %}
        <th>{{ col[0] }}</th>
      {% endfor %}
      {% if edit_link %}
        <th data-sortable="False" data-searchable="False"></th>
      {% endif %}
    </thead>
    <tbody>
      {% for row in data %}
        <tr>
          {% for col in columns %}
            {% set value = row[col[1]] %}
            {% if 'time' in col[1] %}
              <td>{{ value | localtime }}</td>
            {% else %}
              <td>{{ value | tbl_cell }}</td>
            {% endif %}
          {% endfor %}
          {% if edit_link %}
            <td><a class="button is-warning is-small p-2" href="{{ edit_link }}{{ row['id'] }}">Edit</a></td>
          {% endif %}
        </tr>
      {% endfor %}
    </tbody>
  </table>
  <script type="text/javascript">
    initTable("tbl_{{name}}", {{link_col}}, value => `{{link_template}}`);
  </script>
{%- endmacro %}
