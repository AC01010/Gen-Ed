{% extends "base.html" %}
{% from "recent_queries.html" import recent_queries %}

{% block body %}
<div class="columns is-desktop is-gapless">
  <div class="column is-three-quarters-desktop">
    <section class="section">
    {% if query %}

    <div class="container">
      {% if query.username != auth['username'] %}
      <div class="field is-horizontal">
        <div class="field-label">
          <label class="label">User:</label>
        </div>
        <div class="field-body">
          {{ query.username }}
        </div>
      </div>
      {% endif %}

      <div class="field is-horizontal">
        <div class="field-label">
          <label class="label">When:</label>
        </div>
        <div class="field-body">
          {{ (query.query_time | localtime).strftime("%Y-%m-%d %-I:%M%P") }}
        </div>
      </div>

      <div class="field is-horizontal">
        <div class="field-label">
          <label class="label">Language:</label>
        </div>
        <div class="field-body">
          {{ query.language | capitalize }}
        </div>
      </div>

      <div class="field is-horizontal">
        <div class="field-label is-normal">
          <label class="label">Code:</label>
        </div>
        <div class="field-body">
          <pre>
            {{- query.code -}}
          </pre>
        </div>
      </div>

      <div class="field is-horizontal">
        <div class="field-label is-normal">
          <label class="label">Error Message:</label>
        </div>
        <div class="field-body">
          <pre>
            {{- query.error -}}
          </pre>
        </div>
      </div>

      <div class="field is-horizontal">
        <div class="field-label">
          <label class="label">Issue / Question:</label>
        </div>
        <div class="field-body">
          {{ query.issue }}
        </div>
      </div>

    </div>

    <div class="box content mt-5 is-size-5">
      <p><span class="title">Response</span> <span class="subtitle ml-5 is-italic">Remember: It will not always be correct!</span></p>
      {{ response_html | safe }}
    </div>

    {% endif %}
    </section>

  </div>

  <div class="column has-background-light">
    {{ recent_queries(history) }}
  </div>

</div>

{% endblock %}
