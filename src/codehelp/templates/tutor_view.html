{% extends "base.html" %}
{% from "tutor_chat_component.html" import chat_component %}

{% block body %}
<section class="section">
  <div class="container content">
    <h1 class="title">{{topic}}</h1>

    <p><i>[showing context for debugging -- normally hidden]</i>  {{context}}</p>

    {# debounce on the submit handler so that the form's actual submit fires *before* the form elements are disabled #}
    <form action="{{url_for('tutor.new_message')}}" method="post" x-data="{loading: false}" x-on:submit.debounce.10ms="loading = true">
      <input type="hidden" name="id" value="{{chat_id}}">

      {{ chat_component(chat, msg_input=True) }}

    </form>
  </div>

</section>

{% endblock %}
